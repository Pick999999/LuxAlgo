<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMC Indicator - Deriv Integration</title>
    <script src="https://unpkg.com/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="css/smc_deriv.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>üéØ Smart Money Concepts - Deriv</h1>
            <p class="subtitle">Real-time Market Structure Analysis</p>
        </header>

        <div class="controls">
            <div class="control-group">
                <label>Symbol:</label>
                <select id="symbolSelect">
                    <option value="R_100">Volatility 100 Index</option>
                    <option value="R_75">Volatility 75 Index</option>
                    <option value="R_50">Volatility 50 Index</option>
                    <option value="R_25">Volatility 25 Index</option>
                    <option value="R_10">Volatility 10 Index</option>
                    <option value="1HZ100V">Volatility 100 (1s)</option>
                    <option value="frxEURUSD">EUR/USD</option>
                    <option value="frxGBPUSD">GBP/USD</option>
                    <option value="frxUSDJPY">USD/JPY</option>
                </select>
            </div>
            <div class="control-group">
                <label>Timeframe:</label>
                <select id="granularity">
                    <option value="60">1 Minute</option>
                    <option value="300">5 Minutes</option>
                    <option value="900">15 Minutes</option>
                    <option value="3600" selected>1 Hour</option>
                    <option value="14400">4 Hours</option>
                    <option value="86400">1 Day</option>
                </select>
            </div>
            <div class="control-group">
                <label>Start Date:</label>
                <input type="datetime-local" id="startDate">
            </div>
            <div class="control-group">
                <label>End Date:</label>
                <input type="datetime-local" id="endDate">
            </div>
            <div class="control-group">
                <label>Candles:</label>
                <input type="number" id="candleCount" value="200" min="50" max="5000">
            </div>
            <div class="control-group">
                <button class="btn btn-primary" id="loadDataBtn">üì• Load Data</button>
                <button class="btn btn-success" id="subscribeBtn">‚ñ∂Ô∏è Live</button>
            </div>
        </div>

        <div class="smc-controls">
            <label title="Show Higher Highs (HH), Higher Lows (HL), Lower Highs (LH), and Lower Lows (LL)"><input
                    type="checkbox" id="showSwingPoints" checked> Swing Points</label>
            <label title="Show Change of Character (CHoCH) and Break of Structure (BOS)"><input type="checkbox"
                    id="showStructures" checked> CHoCH/BOS</label>
            <label title="Show Institutional Order Blocks (Supply & Demand Zones)"><input type="checkbox"
                    id="showOrderBlocks" checked> Order Blocks</label>
            <label title="Show Fair Value Gaps (Imbalances)"><input type="checkbox" id="showFVG" checked> FVG</label>
            <label title="Show Equal Highs (EQH) and Equal Lows (EQL) - Liquidity Zones"><input type="checkbox"
                    id="showEqualHL" checked> EQH/EQL</label>
            <label title="Enable Click-to-Draw Price Lines"><input type="checkbox" id="userPriceLines" checked> Click
                Draw</label>
            <label>Swing Length: <input type="number" id="swingLength" value="50" min="10" max="100"
                    style="width:60px"></label>
            <button class="btn btn-secondary" id="analyzeBtn">üîÑ Analyze</button>
            <button class="btn btn-danger" id="clearLinesBtn">üóëÔ∏è Clear Lines</button>
        </div>

        <div class="ma-controls"
            style="margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 5px; display: flex; flex-wrap: wrap; gap: 15px;">
            <div class="control-group" style="display: flex; align-items: center; gap: 5px;">
                <label style="font-weight: bold; margin-right: 10px;">MA 1:</label>
                <input type="checkbox" id="ma1_show" title="Toggle MA 1">
                <select id="ma1_type">
                    <option value="ema">EMA</option>
                    <option value="hma">HMA</option>
                    <option value="wma">WMA</option>
                    <option value="ehma">EHMA</option>
                </select>
                <input type="number" id="ma1_period" value="9" min="1" max="200" style="width:60px" title="Period">
                <input type="color" id="ma1_color" value="#FF0000" title="Color">
            </div>
            <div class="control-group" style="display: flex; align-items: center; gap: 5px;">
                <label style="font-weight: bold; margin-right: 10px;">MA 2:</label>
                <input type="checkbox" id="ma2_show" title="Toggle MA 2">
                <select id="ma2_type">
                    <option value="ema">EMA</option>
                    <option value="hma">HMA</option>
                    <option value="wma">WMA</option>
                    <option value="ehma">EHMA</option>
                </select>
                <input type="number" id="ma2_period" value="21" min="1" max="200" style="width:60px" title="Period">
                <input type="color" id="ma2_color" value="#00FF00" title="Color">
            </div>
            <div class="control-group" style="display: flex; align-items: center; gap: 5px;">
                <label style="font-weight: bold; margin-right: 10px;">MA 3:</label>
                <input type="checkbox" id="ma3_show" title="Toggle MA 3">
                <select id="ma3_type">
                    <option value="ema">EMA</option>
                    <option value="hma">HMA</option>
                    <option value="wma">WMA</option>
                    <option value="ehma">EHMA</option>
                </select>
                <input type="number" id="ma3_period" value="50" min="1" max="500" style="width:60px" title="Period">
                <input type="color" id="ma3_color" value="#0000FF" title="Color">
            </div>
            <div class="control-group" style="display: flex; align-items: center; gap: 5px;">
                <label style="font-weight: bold; margin-right: 10px;">MA 4:</label>
                <input type="checkbox" id="ma4_show" title="Toggle MA 4">
                <select id="ma4_type">
                    <option value="ema">EMA</option>
                    <option value="hma">HMA</option>
                    <option value="wma">WMA</option>
                    <option value="ehma">EHMA</option>
                </select>
                <input type="number" id="ma4_period" value="200" min="1" max="1000" style="width:60px" title="Period">
                <input type="color" id="ma4_color" value="#FFFF00" title="Color">
            </div>
        </div>

        <div class="atr-controls"
            style="margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 5px; display: flex; flex-wrap: wrap; gap: 15px;">
            <div class="control-group" style="display: flex; align-items: center; gap: 5px;">
                <label style="font-weight: bold; margin-right: 10px;">Abnormal ATR:</label>
                <input type="checkbox" id="atr_show" title="Highlight Abnormal ATR Candles">
                <label>Period:</label>
                <input type="number" id="atr_period" value="14" min="1" max="100" style="width:60px">
                <label>Multiplier:</label>
                <input type="number" id="atr_multiplier" value="2.0" step="0.1" min="1.0" max="10.0" style="width:60px">
                <label>Bullish Color:</label>
                <input type="color" id="atr_bull_color" value="#00FFFF">
                <label>Bearish Color:</label>
                <input type="color" id="atr_bear_color" value="#FF00FF">
            </div>
        </div>

        <div class="chart-container">
            <div id="chart"></div>
            <div id="status" class="status">Ready</div>
        </div>

        <!-- Analysis Hint Section -->
        <div class="analysis-hint" id="analysisHint">
            <div class="hint-header">
                <span class="hint-icon">üí°</span>
                <span class="hint-title">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏ï‡∏•‡∏≤‡∏î</span>
            </div>
            <div class="hint-content" id="hintContent">
                <p class="hint-placeholder">‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå...</p>
            </div>
        </div>

        <div class="info-panel">
            <div class="info-card">
                <h3>Swing Trend</h3>
                <div class="info-value" id="swingTrend">-</div>
            </div>
            <div class="info-card">
                <h3>Internal Trend</h3>
                <div class="info-value" id="internalTrend">-</div>
            </div>
            <div class="info-card">
                <h3>Order Blocks</h3>
                <div id="orderBlockStats">-</div>
            </div>
            <div class="info-card">
                <h3>Recent Structures</h3>
                <div id="structureStats">-</div>
            </div>
        </div>
    </div>

    <script src="js/smc/MovingAverages.js"></script>
    <script src="js/smc/SMCIndicator.standalone.js"></script>
    <script src="js/smc/DerivSMC.js"></script>
</body>

</html>